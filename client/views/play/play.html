<template name="play">
  <div class="container-fluid">
    <div class="row">
      <div class="col-xs-12">

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" id="myTab">
          {{#each questions}}
            <li class="tab {{isActive order}}" id="{{order}}"><a href="#{{_id}}" data-toggle="tab">{{#unless allAnswered}}Question{{else}}Réponse{{/unless}} {{order}}</a></li>
          {{/each}}
          {{#if allAnswered}}
            <li class="tab {{isActive lastOrder}}" id="{{lastOrder}}"><a href="#last" data-toggle="tab" >Validez</a></li>
          {{/if}}
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
          {{#each questions}}
            <div class="tab-pane {{isActive order}}" id="{{_id}}">

              <div class="row">
                <div class="col-md-6">
                  <div class="inner">

                    <h2>{{question}}</h2>

                    {{#unless answered _id}}
                      {{#each answers}}
                        <div class="radio">
                          <label for="{{_id}}">
                            <input type="radio" name="{{questionId _id}}" id="{{_id}}" value="{{_id}}">
                            {{answer}}
                          </label>
                        </div>
                        {{icheck}}
                      {{/each}}

                    {{else}}
                      {{#each answers}}
                        <div class="radio">
                          <label for="{{_id}}" class="{{#if correct}}text-success{{else}}text-danger{{/if}}">
                            <input type="radio" name="{{questionId _id}}" id="{{_id}}" value="{{_id}}" disabled {{isChecked _id}}>
                            {{answer}} {{#if correct}} (est la bonne réponse){{/if}}
                          </label>
                        </div>
                        {{icheck}}
                      {{/each}}
                    {{/unless}}

                  </div>
                </div>

                <div class="col-md-6">
                  <div class="inner">
                    {{#if video}}
                    <iframe width="460" height="259" src="{{video}}" frameborder="0" allowfullscreen></iframe>
                    {{/if}}
                    {{#if image}}
                      <img src="{{image}}" alt="{{question}}" class="img-responsive" />
                    {{/if}}
                    {{{description}}}
                  </div>
                </div>
              </div>
              {{#unless answered _id}}
              <div class="row">
                <div class="col-xs-12">
                  <button class="btn btn-success btn-lg btn-block validate" id="{{_id}}"><span class="fa fa-check"></span> Valider cette réponse</button>
                </div>
              </div>
              {{/unless}}
            </div>
          {{/each}}
          {{#if allAnswered}}

            <!-- Last Tab -->
            <div class="tab-pane {{isActive lastOrder}}" id="last">
              <div class="row">
              {{> form}}
              </div>
            </div>
          {{/if}}
        </div>

      </div>
    </div>
  </div>
</template>

<template name="city">
    <span class="label label-default">{{_id}}</span>&nbsp;{{city}}
</template>
